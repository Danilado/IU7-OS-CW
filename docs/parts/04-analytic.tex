\section{Аналитический раздел}

\subsection{Постановка задачи}

В соответствии с заданием на курсовую работу, необходимо разработать загружаемый модуль ядра Linux, реализующий виртуальное устройство мыши, принимающий команды от мобильного приложения на смартфоне по каналу Bluetooth и преобразующий эти команды в события подсистемы ввода.

Для выполнения этой задачи требуется:
\begin{enumerate}
	\item проанализировать и выбрать способ перевода касаний сенсорного экрана телефона в движение курсора мыши;
	\item проанализировать и выбрать метод передачи информации с телефона на компьютер;
	\item проанализировать и выбрать способ генерации событий подсистемы ввода;
	\item разработать алгоритмы и структуру загружаемого модуля ядра, обрабатывающего информацию, полученную с телефона и преобразующего её в события подсистемы ввода;
	\item реализовать загружаемый модуль ядра, выполняющий поставленную задачу;
	\item протестировать работу реализованного загружаемого модуля ядра.
\end{enumerate}

\input{parts/analytic/01-mapping.tex}

\input{parts/analytic/02-transfer.tex}

\input{parts/analytic/03-movement.tex}

\subsection*{Выводы}

В разделе проанализированы варианты преобразования касаний в движение, способы беспроводного обмена и варианты интеграции с подсистемой ввода. Для сопоставления касаний выбраны относительные смещения \texttt{dx/dy}; этот способ не требует согласования геометрии экранов и достаточен для достижения цели — движения курсора по экрану ПК.

Для передачи данных между смартфоном и модулем ядра, при требовании использовать Bluetooth, рассмотрены L2CAP, HID, устройства \lstinline|/dev/rfcommN| и RFCOMM в ядре. Выбран серверный RFCOMM-сокет в пространстве ядра с клиентским \lstinline|BluetoothSocket| на Android, так как он даёт потоковый канал без пользовательских прослоек и покрывает нужный объём функций.

Для генерации событий ввода сопоставлены регистрация виртуального устройства через \lstinline|struct input_dev|, использование \lstinline|uinput| и интеграция через HID/UHID. Выбрана регистрация собственного устройства в подсистеме input: она позволяет формировать события \lstinline|EV_REL| и \lstinline|EV_KEY| непосредственно из модуля ядра и держать логику в драйвере.

Итоговая схема «Android-приложение — RFCOMM — загружаемый модуль ядра — подсистема input» отражает рассмотренные решения и достаточна для реализации драйвера в соответствии с требованиями ТЗ.
